teams (collection)
    teamName (document)
        points
        boats (collection)
            boatId (document)
                boatType
                shallowWaterSpeed
                semiDeepWaterSpeed
                deepWaterSpeed
                maxHealth
                inUse
                currentHealth
                timeToHarborInMs
                cargo (collection)
                    fishName (document)
                        amount
        fish (collection)
            fishName (document)
                amount

boats (collection)
    boatType (document)
        shallowWaterSpeed
        semiDeepWaterSpeed
        deepWaterSpeed
        maxHealth

fish (collection)
    fishName (document)
       minPrice
       maxPrice
       foundInAreas (collection)
            areaName (document) 
                waterType

events (collection)
    evnentId (document)
        teamName
        eventType (sell, buy, catch)
        eventTarget (fish, boat)
        fish (collection)
            fishName (document)
                fishAmount
                fishPrice
        boatType
        boatPrice
        boatAmount
        fishAreaName

games (collection)
    fiskespil (document)
        gameState
        serverTime
        timeToEndInMs
        timeToStartInMs
        fishMarketInfo (collection)
            fishName (document)
                supply
                demand
                currentPrice
                minPrice
                maxPrice
        fishAreaInfo (collection)
            areaName (document)
                waterType
                openForFishing
                distanceFromShore
                fish (collection)
                    fishname (document)
                        maxAmount
                        currentAmount
                        available

              
Gameserver
    - Handles Game start
        - Start new FishGame 
            - Set start time
            - Set end time
            - Create new fish market
            - Create new fish area
        - Subscribes to events collection changes
    - Sends periodic game data (periodic updates mostly for timer, fish area info and fish market info could be on a push basis on document update)
    - Periodically evaluates game data
        - Update fish market
            - Optional - update demand based on game phase
            - Remove fish from supply based on demand
            - Update fish prices based on supply vs. demand
        - Update fish area
            - Add fish based on current amount and growth rate
            - Cannot go above max
    - Updates team document on event
        - On boat buy event
            - Check that there is enough points to avoid using the same points multiple times
            - Remove points based on price and buy amount
            - Add boat to team boats collection
        - On fish sell event
            - Check team fish stock to avoid multiple sells of the same fish
            - Remove fish from team stock based on amount
            - Add points equal to fish price and sell amount
        - On fish store event
            - update amount of fishName document in fish collection
        - On boat sail event
            - Update boat with boatId field inUse to true
        - On fish catch event
            - Evaluate 
            - Update boat with boatId field cargo with 
    - Updates fishmarket info on fish sell event
        - Add fish to supply
    - Updates fish area info on fish catch event
        - Remove fish from amount in area

User Browser
    - Creates new team if team not in teams
        - setDoc on teams with teamName as identifier
            - Create starting boat inventory (might be empty)
            - Add starting points (might be 0)
            - Create starting fish inventory (might be empty)
    - Subscribes to team document for updates to points, boats and fish
    - Subscribes to game data for updates on game time, fish area info and fish market info
    - Periodically updates team boat document to track boat time to destination
        - update boat time to destination based on speed and old time to destination for boats with staus != docked
        - if updated time to destination =< 0 
            - if boat status = outbound
                - trigger fish catch event
                - change boat status to inbound
                - update boat time to destination
            - if boat status = inbound
                - trigger fish store event
                    - On team document update fish collection with boat cargo
                - update boat status to docked
                - update boat cargo to be empty
    - Allow users to send boat to fish area 
        - Choose boat and destination
        - Update team boatId document
            - update boat status to outbound
            - Updated boat time to destination
    - Allow users to buy boat
        - Choose boat to buy 
        - Trigger boat buy event
    - Allow users to sell fish
        - Choose fish type and amount
        - Trigger fish sell event
    - Sends events to events collection on user input
        - On boat buy event
            - Send event with 
                - teamId
                - eventTarget boat
                - eventType buy
                - boat type 
                - current price 
                - amount
        - On fish catch event
            - Send event with
                - teamId
                - eventTarget fish
                - eventType catch
                - areaName
                - fish
                    - fishName
                    - fishAmount
        - On fish sell event
            - Send event with
                - teamId
                - eventTarget fish
                - eventType sell
                - fish
                    - fishName
                    - fishAmount
                    - fishPrice

    
